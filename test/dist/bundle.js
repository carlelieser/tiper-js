!function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,r=(i=n(2))&&"object"==typeof i&&"default"in i?i.default:i;const o=Math.pow(2,31)-1;function s(){return(s=r((function*(t){t.stopped=!0;for(var e=0,n=Object.values(t.timeouts);e<n.length;e++){const t=n[e];clearTimeout(t)}const i=()=>{},r=Object.values(t.promises).map(t=>{t.catch(i)}),s=setInterval(i,o);yield Promise.all(r),clearInterval(s)}))).apply(this,arguments)}class a extends Error{}Object.defineProperty(a.prototype,"name",{value:"SetIntervalAsyncError"});class u{constructor(){this.stopped=!1,this.id=0,this.timeouts={},this.promises={}}}function c(t,e,n,...i){const o=t.id;t.promises[o]=r((function*(){const r=new Date;try{yield e(...i)}catch(t){console.error(t)}const s=new Date;if(!t.stopped){const a=s-r,u=n>a?n-a:0;t.timeouts[o+1]=setTimeout(c,u,t,e,n,...i)}delete t.timeouts[o],delete t.promises[o]}))(),t.id=o+1}e.SetIntervalAsyncError=a,e.clearIntervalAsync=function(t){return s.apply(this,arguments)},e.setIntervalAsync=function(t,e,...n){!function(t){if("function"!=typeof t)throw new a('Invalid argument: "handler". Expected a function.')}(t),function(t){if(!("number"==typeof t&&10<=t))throw new a('Invalid argument: "interval". Expected a number greater than or equal to 10.')}(e);const i=new u,r=i.id;return i.timeouts[r]=setTimeout(c,e,i,t,e,...n),i}},function(t,e,n){var i=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(r,o){function s(t){try{u(i.next(t))}catch(t){o(t)}}function a(t){try{u(i.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((i=i.apply(t,e||[])).next())}))},r=this&&this.__generator||function(t,e){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=s.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},o=this,s=n(3),a={text:"\n\tThis is like one of those scenes in a futuristic sci-fi movie where someone is communicating with the main character through an ominous computer screen. And the person is completely unaware of the context or meaning of the message, but then later finds out it was destined to be. \n\t\n\tLike how awesome would it be if I just did something like...\n\n\tMark. You are the chosen one.\n\n\tMeet @ Starbucks later tho?\n\n\tNah just kidding, (sorry if your name is Mark). Anyway, hope you enjoy tinkering around with this!\n\n\t",showCaret:!0,caretType:"normal"};i(o,void 0,void 0,(function(){return r(this,(function(t){switch(t.label){case 0:return[4,new s(document.querySelector(".tiper-js-container"),a).beginTyping()];case 1:return t.sent(),[2]}}))}))},function(t,e){function n(t,e,n,i,r,o,s){try{var a=t[o](s),u=a.value}catch(t){return void n(t)}a.done?e(u):Promise.resolve(u).then(i,r)}t.exports=function(t){return function(){var e=this,i=arguments;return new Promise((function(r,o){var s=t.apply(e,i);function a(t){n(s,r,o,a,u,"next",t)}function u(t){n(s,r,o,a,u,"throw",t)}a(void 0)}))}}},function(t,e,n){"use strict";n.r(e);var i=n(0),r=function(t,e){return Math.random()*(e-t)+t},o=function(t){var e=document.createElement("span");return e.className=t,e},s=function(t){return new Promise((function(e){setTimeout(e,t)}))},a=function(){return(a=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},u=function(t,e,n,i){return new(n||(n=Promise))((function(r,o){function s(t){try{u(i.next(t))}catch(t){o(t)}}function a(t){try{u(i.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((i=i.apply(t,e||[])).next())}))},c=function(t,e){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=s.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},l=function(t,e){var n=this;if(this.options={text:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus tempus sagittis dapibus. Fusce lacinia dui tortor, at porttitor quam luctus ut. Aliquam gravida commodo eros ac dictum. Nam ac odio at sem interdum dictum eget sit amet lorem. Vivamus enim velit, condimentum sed neque non, dignissim viverra nulla. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Duis sodales, neque eget tincidunt efficitur, nisi orci vestibulum diam, eget fringilla dui dolor sed nisi. Pellentesque feugiat augue in felis interdum, non tempus dui volutpat. Sed pulvinar, massa non placerat scelerisque, nunc tellus posuere felis, a ultricies mi libero id velit. Mauris sed arcu dolor. Mauris varius a metus sit amet pulvinar. Proin rhoncus non quam in vulputate. ",hesitation:.45,wordsPerMinute:40,pauseTimeout:525,pauseOnSpace:!1,pauseOnEndOfSentence:!0,showCaret:!1,caretType:"normal",glitch:!1,onFinishedTyping:function(){console.log("Finished typing!")}},this.currentIndex=0,this.typingListener={finishedTyping:!1,finishedTypingListener:function(t){},get isFinishedTyping(){return this.finishedTyping},set isFinishedTyping(t){this.finishedTyping=t,this.finishedTypingListener(t)},registerListener:function(t){this.finishedTypingListener=t}},this.trim=function(t){return t.trim()},this.getTypingSpeed=function(){return n.currentText.length/(4.7*n.options.wordsPerMinute)+10},this.getCaretCharacter=function(){return"normal"===n.options.caretType?"â–®":"_"},this.setCurrentText=function(t){n.currentText=t,n.currentIndex=0,console.log("Setting current text to:",t)},this.setCurrentTextElement=function(t){n.currentTextElement=t},this.getCurrentText=function(){return n.currentText},this.getTextByRange=function(t,e){return n.getCurrentText().substring(t,e)},this.getCaretLength=function(){return n.options.showCaret?1:0},this.sourceTextIsTargetLength=function(){var t=n.getCaretLength(),e=n.currentTextElement.textContent.length-t,i=n.currentText.length-1;return console.log("Current text length vs actual container text length:",i,e),e==i},this.observeTyping=function(){return new Promise((function(t,e){n.typingListener.registerListener((function(e){e&&t()}))}))},this.setFinishedTyping=function(t){n.typingListener.isFinishedTyping=t},this.resetFinishedTyping=function(){n.setFinishedTyping(!1)},this.updateElementText=function(t){var e=n.currentTextElement.textContent.length,i=n.getTextByRange(0,e)+t;n.currentTextElement.textContent=i},this.stopTyping=function(){return n.activateCaret(),Object(i.clearIntervalAsync)(n.typingInterval)},this.pauseTyping=function(t){return u(n,void 0,void 0,(function(){var e;return c(this,(function(n){switch(n.label){case 0:return e=null!=t?t:this.options.pauseTimeout,this.stopTyping(),[4,s(e)];case 1:return n.sent(),this.resumeTyping(),[2]}}))}))},this.resumeTyping=function(){n.initializeTypingInterval(),n.deactivateCaret()},this.applyVariation=function(){return u(n,void 0,void 0,(function(){var t;return c(this,(function(e){switch(e.label){case 0:return t=Math.floor(this.options.hesitation*Math.random()*r(100,500)),[4,s(t)];case 1:return e.sent(),[2]}}))}))},this.getCharAt=function(t){return n.currentText.charAt(t)},this.isEndOfSentence=function(t,e){return/[\.\?\!]/.test(t)&&!/[\.\?\!]/.test(e)||/\\n/.test(t)},this.getShouldPause=function(t,e){var i=/\s/.test(t),r=n.isEndOfSentence(t,e);return n.options.pauseOnSpace&&i||n.options.pauseOnEndOfSentence&&r},this.insertCurrentChar=function(){return u(n,void 0,void 0,(function(){var t,e,n,i;return c(this,(function(r){switch(r.label){case 0:return t=this.getCharAt(this.currentIndex),e=this.getCharAt(this.currentIndex+1),n=this.getShouldPause(t,e),i=this.sourceTextIsTargetLength(),this.updateElementText(t),this.options.hesitation?[4,this.applyVariation()]:[3,2];case 1:r.sent(),r.label=2;case 2:return i?(this.options.onFinishedTyping&&this.options.onFinishedTyping(),this.setFinishedTyping(!0),[4,this.stopTyping()]):[3,4];case 3:return r.sent(),[3,6];case 4:return this.currentIndex+=1,n?[4,this.pauseTyping()]:[3,6];case 5:r.sent(),r.label=6;case 6:return[2]}}))}))},this.activateCaret=function(){n.caretElement&&n.caretElement.classList.add("blinking")},this.deactivateCaret=function(){n.caretElement&&n.caretElement.classList.remove("blinking")},this.appendElementToContainer=function(t){n.container.appendChild(t)},this.initializeTextElement=function(){var t=o("tiper-js-text");n.appendElementToContainer(t),n.setCurrentTextElement(t)},this.initializeCaret=function(){n.caretElement&&n.caretElement.remove();var t=o("tiper-js-caret");t.innerText=n.getCaretCharacter(),n.appendElementToContainer(t),n.caretElement=t,n.activateCaret()},this.initializeGlitchEffect=function(){n.glitchInterval=Object(i.setIntervalAsync)(n.applyGlitch,5e3),console.log("Beginning to type at "+n.options.wordsPerMinute+" words per minute.")},this.initializeTypingInterval=function(){var t=n.getTypingSpeed();n.typingInterval=Object(i.setIntervalAsync)(n.insertCurrentChar,t),console.log("Typing interval is:",t)},this.setElementText=function(t){n.currentTextElement.textContent=t},this.resetElementText=function(){n.container.innerHTML=""},this.applyGlitch=function(){return u(n,void 0,void 0,(function(){var t,e,n,i,o;return c(this,(function(a){switch(a.label){case 0:return t=this.container.textContent,e=r(1,t.length),n=t.substring(0,e),i=t.substring(e,t.length),o=n+"â–® "+i,this.setElementText(o),[4,s(this.options.hesitation*r(100,200))];case 1:return a.sent(),this.setElementText(""+n+i),[2]}}))}))},this.beginTyping=function(t,e){return u(n,void 0,void 0,(function(){var n;return c(this,(function(i){switch(i.label){case 0:return n=t||this.options.text,e&&this.resetElementText(),this.initializeTextElement(),this.setCurrentText(n),this.resetFinishedTyping(),this.initializeTypingInterval(),this.options.glitch&&this.initializeGlitchEffect(),this.options.showCaret&&this.initializeCaret(),this.deactivateCaret(),[4,this.observeTyping()];case 1:return i.sent(),[2]}}))}))},this.line=function(t){return u(n,void 0,void 0,(function(){return c(this,(function(e){switch(e.label){case 0:return[4,this.beginTyping(t)];case 1:return e.sent(),[2,this]}}))}))},this.container=t,null===this.container)throw new Error("tiper-js: Invalid container element.");e&&(this.options=a(a({},this.options),e)),this.options.text=this.trim(this.options.text),this.setCurrentText(this.options.text)};e.default=l}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3NldC1pbnRlcnZhbC1hc3luYy9keW5hbWljL2luZGV4LmpzIiwid2VicGFjazovLy8uL3Rlc3QvYXBwLnRzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2FzeW5jVG9HZW5lcmF0b3IuanMiLCJ3ZWJwYWNrOi8vLy4vbGliL3V0aWwuanMiLCJ3ZWJwYWNrOi8vLy4vbGliL2luZGV4LmpzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiZXgiLCJfYXN5bmNUb0dlbmVyYXRvciIsIk1BWF9JTlRFUlZBTF9NUyIsIk1hdGgiLCJwb3ciLCJfY2xlYXJJbnRlcnZhbEFzeW5jIiwidGltZXIiLCJzdG9wcGVkIiwiX2kiLCJfT2JqZWN0JHZhbHVlcyIsInZhbHVlcyIsInRpbWVvdXRzIiwibGVuZ3RoIiwidGltZW91dCIsImNsZWFyVGltZW91dCIsIm5vb3AiLCJwcm9taXNlcyIsIm1hcCIsInByb21pc2UiLCJjYXRjaCIsIm5vb3BJbnRlcnZhbCIsInNldEludGVydmFsIiwiUHJvbWlzZSIsImFsbCIsImNsZWFySW50ZXJ2YWwiLCJhcHBseSIsInRoaXMiLCJhcmd1bWVudHMiLCJTZXRJbnRlcnZhbEFzeW5jRXJyb3IiLCJFcnJvciIsIlNldEludGVydmFsQXN5bmNUaW1lciIsImlkIiwidGltZW91dEhhbmRsZXIiLCJoYW5kbGVyIiwiaW50ZXJ2YWwiLCJhcmdzIiwic3RhcnRUaW1lIiwiRGF0ZSIsImVyciIsImNvbnNvbGUiLCJlcnJvciIsImVuZFRpbWUiLCJleGVjdXRpb25UaW1lIiwic2V0VGltZW91dCIsImNsZWFySW50ZXJ2YWxBc3luYyIsIl94Iiwic2V0SW50ZXJ2YWxBc3luYyIsInZhbGlkYXRlSGFuZGxlciIsInZhbGlkYXRlSW50ZXJ2YWwiLCJUaXBlciIsIm9wdGlvbnMiLCJ0ZXh0Iiwic2hvd0NhcmV0IiwiY2FyZXRUeXBlIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiYmVnaW5UeXBpbmciLCJhc3luY0dlbmVyYXRvclN0ZXAiLCJnZW4iLCJyZXNvbHZlIiwicmVqZWN0IiwiX25leHQiLCJfdGhyb3ciLCJhcmciLCJpbmZvIiwiZG9uZSIsInRoZW4iLCJmbiIsInNlbGYiLCJ1bmRlZmluZWQiLCJnZXRSYW5kb21BcmJpdHJhcnkiLCJtaW4iLCJtYXgiLCJyYW5kb20iLCJjcmVhdGVTcGFuIiwiY2xhc3NOYW1lIiwiZWwiLCJjcmVhdGVFbGVtZW50IiwiZGVsYXkiLCJtcyIsIl9fYXNzaWduIiwiYXNzaWduIiwiX19hd2FpdGVyIiwidGhpc0FyZyIsIl9hcmd1bWVudHMiLCJQIiwiZ2VuZXJhdG9yIiwiZnVsZmlsbGVkIiwic3RlcCIsIm5leHQiLCJlIiwicmVqZWN0ZWQiLCJyZXN1bHQiLCJfX2dlbmVyYXRvciIsImJvZHkiLCJmIiwieSIsImciLCJfIiwibGFiZWwiLCJzZW50IiwidHJ5cyIsIm9wcyIsInZlcmIiLCJpdGVyYXRvciIsInYiLCJvcCIsIlR5cGVFcnJvciIsInBvcCIsInB1c2giLCJjb250YWluZXIiLCJfdGhpcyIsImhlc2l0YXRpb24iLCJ3b3Jkc1Blck1pbnV0ZSIsInBhdXNlVGltZW91dCIsInBhdXNlT25TcGFjZSIsInBhdXNlT25FbmRPZlNlbnRlbmNlIiwiZ2xpdGNoIiwib25GaW5pc2hlZFR5cGluZyIsImxvZyIsImN1cnJlbnRJbmRleCIsInR5cGluZ0xpc3RlbmVyIiwiZmluaXNoZWRUeXBpbmciLCJmaW5pc2hlZFR5cGluZ0xpc3RlbmVyIiwicmVnaXN0ZXJMaXN0ZW5lciIsImxpc3RlbmVyIiwidHJpbSIsInN0ciIsImdldFR5cGluZ1NwZWVkIiwiY3VycmVudFRleHQiLCJnZXRDYXJldENoYXJhY3RlciIsInNldEN1cnJlbnRUZXh0Iiwic2V0Q3VycmVudFRleHRFbGVtZW50IiwiY3VycmVudFRleHRFbGVtZW50IiwiZ2V0Q3VycmVudFRleHQiLCJnZXRUZXh0QnlSYW5nZSIsInN0YXJ0IiwiZW5kIiwic3Vic3RyaW5nIiwiZ2V0Q2FyZXRMZW5ndGgiLCJzb3VyY2VUZXh0SXNUYXJnZXRMZW5ndGgiLCJjYXJldExlbmd0aCIsInRleHRDb250ZW50TGVuZ3RoIiwidGV4dENvbnRlbnQiLCJjdXJyZW50VGV4dExlbmd0aCIsIm9ic2VydmVUeXBpbmciLCJpc0ZpbmlzaGVkIiwic2V0RmluaXNoZWRUeXBpbmciLCJpc0ZpbmlzaGVkVHlwaW5nIiwicmVzZXRGaW5pc2hlZFR5cGluZyIsInVwZGF0ZUVsZW1lbnRUZXh0IiwiY2hhciIsImxhc3RJbmRleCIsInN0b3BUeXBpbmciLCJhY3RpdmF0ZUNhcmV0IiwidHlwaW5nSW50ZXJ2YWwiLCJwYXVzZVR5cGluZyIsInRpbWVPdXQiLCJfYSIsInJlc3VtZVR5cGluZyIsImluaXRpYWxpemVUeXBpbmdJbnRlcnZhbCIsImRlYWN0aXZhdGVDYXJldCIsImFwcGx5VmFyaWF0aW9uIiwiZmxvb3IiLCJnZXRDaGFyQXQiLCJpbmRleCIsImNoYXJBdCIsImlzRW5kT2ZTZW50ZW5jZSIsImN1cnJlbnRDaGFyIiwibmV4dENoYXIiLCJ0ZXN0IiwiZ2V0U2hvdWxkUGF1c2UiLCJpc1NwYWNlIiwiaW5zZXJ0Q3VycmVudENoYXIiLCJzaG91bGRQYXVzZSIsImNhcmV0RWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsInJlbW92ZSIsImFwcGVuZEVsZW1lbnRUb0NvbnRhaW5lciIsImVsZW1lbnQiLCJhcHBlbmRDaGlsZCIsImluaXRpYWxpemVUZXh0RWxlbWVudCIsInRleHRFbGVtZW50IiwiaW5pdGlhbGl6ZUNhcmV0IiwiY2FyZXQiLCJpbm5lclRleHQiLCJpbml0aWFsaXplR2xpdGNoRWZmZWN0IiwiZ2xpdGNoSW50ZXJ2YWwiLCJhcHBseUdsaXRjaCIsInNldEVsZW1lbnRUZXh0IiwicmVzZXRFbGVtZW50VGV4dCIsImlubmVySFRNTCIsInJhbmRvbUNoYXJQb3NpdGlvbiIsImJlZm9yZUNoYXIiLCJhZnRlckNoYXIiLCJyZXNldCIsImxpbmUiXSwibWFwcGluZ3MiOiJhQUNFLElBQUlBLEVBQW1CLEdBR3ZCLFNBQVNDLEVBQW9CQyxHQUc1QixHQUFHRixFQUFpQkUsR0FDbkIsT0FBT0YsRUFBaUJFLEdBQVVDLFFBR25DLElBQUlDLEVBQVNKLEVBQWlCRSxHQUFZLENBQ3pDRyxFQUFHSCxFQUNISSxHQUFHLEVBQ0hILFFBQVMsSUFVVixPQU5BSSxFQUFRTCxHQUFVTSxLQUFLSixFQUFPRCxRQUFTQyxFQUFRQSxFQUFPRCxRQUFTRixHQUcvREcsRUFBT0UsR0FBSSxFQUdKRixFQUFPRCxRQUtmRixFQUFvQlEsRUFBSUYsRUFHeEJOLEVBQW9CUyxFQUFJVixFQUd4QkMsRUFBb0JVLEVBQUksU0FBU1IsRUFBU1MsRUFBTUMsR0FDM0NaLEVBQW9CYSxFQUFFWCxFQUFTUyxJQUNsQ0csT0FBT0MsZUFBZWIsRUFBU1MsRUFBTSxDQUFFSyxZQUFZLEVBQU1DLElBQUtMLEtBS2hFWixFQUFvQmtCLEVBQUksU0FBU2hCLEdBQ1gsb0JBQVhpQixRQUEwQkEsT0FBT0MsYUFDMUNOLE9BQU9DLGVBQWViLEVBQVNpQixPQUFPQyxZQUFhLENBQUVDLE1BQU8sV0FFN0RQLE9BQU9DLGVBQWViLEVBQVMsYUFBYyxDQUFFbUIsT0FBTyxLQVF2RHJCLEVBQW9Cc0IsRUFBSSxTQUFTRCxFQUFPRSxHQUV2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T0FaQThCLEVBQWM5RSxHQUFRekIsS0FBS3dCLFFBQVFDLEtBQy9CaUosR0FDQTFLLEtBQUtxSyxtQkFDVHJLLEtBQUs0Six3QkFDTDVKLEtBQUt5RyxlQUFlRixHQUNwQnZHLEtBQUsySCxzQkFDTDNILEtBQUtzSSwyQkFDRHRJLEtBQUt3QixRQUFRbUUsUUFDYjNGLEtBQUtpSyx5QkFDTGpLLEtBQUt3QixRQUFRRSxXQUNiMUIsS0FBSzhKLGtCQUNUOUosS0FBS3VJLGtCQUNFLENBQUMsRUFBYXZJLEtBQUt1SCxpQkFDOUIsS0FBSyxFQUVELE9BREFhLEVBQUcxRCxPQUNJLENBQUMsV0FJeEIxRSxLQUFLMkssS0FBTyxTQUFVbEosR0FBUSxPQUFPK0IsRUFBVTZCLE9BQU8sT0FBUSxHQUFRLFdBQ2xFLE9BQU9sQixFQUFZbkUsTUFBTSxTQUFVb0ksR0FDL0IsT0FBUUEsRUFBRzNELE9BQ1AsS0FBSyxFQUFHLE1BQU8sQ0FBQyxFQUFhekUsS0FBSzhCLFlBQVlMLElBQzlDLEtBQUssRUFFRCxPQURBMkcsRUFBRzFELE9BQ0ksQ0FBQyxFQUFjMUUsY0FJdENBLEtBQUtvRixVQUFZQSxFQUNNLE9BQW5CcEYsS0FBS29GLFVBQ0wsTUFBTSxJQUFJakYsTUFBTSx3Q0FDaEJxQixJQUNBeEIsS0FBS3dCLFFBQVU4QixFQUFTQSxFQUFTLEdBQUl0RCxLQUFLd0IsU0FBVUEsSUFDeER4QixLQUFLd0IsUUFBUUMsS0FBT3pCLEtBQUtvRyxLQUFLcEcsS0FBS3dCLFFBQVFDLE1BQzNDekIsS0FBS3lHLGVBQWV6RyxLQUFLd0IsUUFBUUMsT0FJMUIiLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDEpO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuXG5mdW5jdGlvbiBfaW50ZXJvcERlZmF1bHQgKGV4KSB7IHJldHVybiAoZXggJiYgKHR5cGVvZiBleCA9PT0gJ29iamVjdCcpICYmICdkZWZhdWx0JyBpbiBleCkgPyBleFsnZGVmYXVsdCddIDogZXg7IH1cblxudmFyIF9hc3luY1RvR2VuZXJhdG9yID0gX2ludGVyb3BEZWZhdWx0KHJlcXVpcmUoJ0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvYXN5bmNUb0dlbmVyYXRvcicpKTtcblxuLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTkgRW1pbGlvIEFsbWFuc2kuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBUaGlzIHdvcmsgaXMgbGljZW5zZWQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBNSVQgbGljZW5zZS5cbiAqIEZvciBhIGNvcHksIHNlZSB0aGUgZmlsZSBMSUNFTlNFIGluIHRoZSByb290IGRpcmVjdG9yeS5cbiAqL1xuY29uc3QgTUFYX0lOVEVSVkFMX01TID0gTWF0aC5wb3coMiwgMzEpIC0gMTtcbi8qKlxuICogU3RvcHMgYW4gZXhlY3V0aW9uIGN5Y2xlIHN0YXJ0ZWQgYnkgc2V0SW50ZXJ2YWxBc3luYy48YnI+XG4gKiBBbnkgb25nb2luZyBmdW5jdGlvbiBleGVjdXRpb25zIHdpbGwgcnVuIHVudGlsIGNvbXBsZXRpb24sXG4gKiBidXQgYWxsIGZ1dHVyZSBvbmVzIHdpbGwgYmUgY2FuY2VsbGVkLlxuICpcbiAqIEBwYXJhbSB7U2V0SW50ZXJ2YWxBc3luY1RpbWVyfSB0aW1lclxuICogQHJldHVybnMge1Byb21pc2V9XG4gKiAgICAgICAgICBBIHByb21pc2Ugd2hpY2ggcmVzb2x2ZXMgd2hlbiBhbGwgcGVuZGluZyBleGVjdXRpb25zIGhhdmUgZmluaXNoZWQuXG4gKi9cblxuZnVuY3Rpb24gY2xlYXJJbnRlcnZhbEFzeW5jKF94KSB7XG4gIHJldHVybiBfY2xlYXJJbnRlcnZhbEFzeW5jLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG59XG5cbmZ1bmN0aW9uIF9jbGVhckludGVydmFsQXN5bmMoKSB7XG4gIF9jbGVhckludGVydmFsQXN5bmMgPSBfYXN5bmNUb0dlbmVyYXRvcihmdW5jdGlvbiogKHRpbWVyKSB7XG4gICAgdGltZXIuc3RvcHBlZCA9IHRydWU7XG5cbiAgICBmb3IgKHZhciBfaSA9IDAsIF9PYmplY3QkdmFsdWVzID0gT2JqZWN0LnZhbHVlcyh0aW1lci50aW1lb3V0cyk7IF9pIDwgX09iamVjdCR2YWx1ZXMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICBjb25zdCB0aW1lb3V0ID0gX09iamVjdCR2YWx1ZXNbX2ldO1xuICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuICAgIH1cblxuICAgIGNvbnN0IG5vb3AgPSAoKSA9PiB7fTtcblxuICAgIGNvbnN0IHByb21pc2VzID0gT2JqZWN0LnZhbHVlcyh0aW1lci5wcm9taXNlcykubWFwKHByb21pc2UgPT4ge1xuICAgICAgcHJvbWlzZS5jYXRjaChub29wKTtcbiAgICB9KTtcbiAgICBjb25zdCBub29wSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChub29wLCBNQVhfSU5URVJWQUxfTVMpO1xuICAgIHlpZWxkIFByb21pc2UuYWxsKHByb21pc2VzKTtcbiAgICBjbGVhckludGVydmFsKG5vb3BJbnRlcnZhbCk7XG4gIH0pO1xuICByZXR1cm4gX2NsZWFySW50ZXJ2YWxBc3luYy5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xufVxuXG4vKipcbiAqIENvcHlyaWdodCAoYykgMjAxOSBFbWlsaW8gQWxtYW5zaS4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIFRoaXMgd29yayBpcyBsaWNlbnNlZCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIE1JVCBsaWNlbnNlLlxuICogRm9yIGEgY29weSwgc2VlIHRoZSBmaWxlIExJQ0VOU0UgaW4gdGhlIHJvb3QgZGlyZWN0b3J5LlxuICovXG5cbi8qKlxuICogRXJyb3IgdGhyb3duIGJ5IHNldEludGVydmFsQXN5bmMgd2hlbiBpbnZhbGlkIGFyZ3VtZW50cyBhcmUgcHJvdmlkZWQuXG4gKi9cbmNsYXNzIFNldEludGVydmFsQXN5bmNFcnJvciBleHRlbmRzIEVycm9yIHt9XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShTZXRJbnRlcnZhbEFzeW5jRXJyb3IucHJvdG90eXBlLCAnbmFtZScsIHtcbiAgdmFsdWU6ICdTZXRJbnRlcnZhbEFzeW5jRXJyb3InXG59KTtcblxuLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTkgRW1pbGlvIEFsbWFuc2kuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBUaGlzIHdvcmsgaXMgbGljZW5zZWQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBNSVQgbGljZW5zZS5cbiAqIEZvciBhIGNvcHksIHNlZSB0aGUgZmlsZSBMSUNFTlNFIGluIHRoZSByb290IGRpcmVjdG9yeS5cbiAqL1xuY29uc3QgTUlOX0lOVEVSVkFMX01TID0gMTA7XG4vKipcbiAqIEBwcml2YXRlXG4gKlxuICogQHBhcmFtIHtmdW5jdGlvbn0gaGFuZGxlciAtIEhhbmRsZXIgZnVuY3Rpb24gdG8gYmUgZXhlY3V0ZWQgaW4gaW50ZXJ2YWxzLjxicj5cbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNYXkgYmUgYXN5bmNocm9ub3VzLlxuICovXG5cbmZ1bmN0aW9uIHZhbGlkYXRlSGFuZGxlcihoYW5kbGVyKSB7XG4gIGlmICghKHR5cGVvZiBoYW5kbGVyID09PSAnZnVuY3Rpb24nKSkge1xuICAgIHRocm93IG5ldyBTZXRJbnRlcnZhbEFzeW5jRXJyb3IoJ0ludmFsaWQgYXJndW1lbnQ6IFwiaGFuZGxlclwiLiBFeHBlY3RlZCBhIGZ1bmN0aW9uLicpO1xuICB9XG59XG4vKipcbiAqIEBwcml2YXRlXG4gKlxuICogQHBhcmFtIHtudW1iZXJ9IGludGVydmFsIC0gSW50ZXJ2YWwgaW4gbWlsbGlzZWNvbmRzLiBNdXN0IGJlIGF0IGxlYXN0IDEwIG1zLlxuICovXG5cbmZ1bmN0aW9uIHZhbGlkYXRlSW50ZXJ2YWwoaW50ZXJ2YWwpIHtcbiAgaWYgKCEodHlwZW9mIGludGVydmFsID09PSAnbnVtYmVyJyAmJiBNSU5fSU5URVJWQUxfTVMgPD0gaW50ZXJ2YWwpKSB7XG4gICAgdGhyb3cgbmV3IFNldEludGVydmFsQXN5bmNFcnJvcihgSW52YWxpZCBhcmd1bWVudDogXCJpbnRlcnZhbFwiLiBFeHBlY3RlZCBhIG51bWJlciBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gJHtNSU5fSU5URVJWQUxfTVN9LmApO1xuICB9XG59XG5cbi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE5IEVtaWxpbyBBbG1hbnNpLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogVGhpcyB3b3JrIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgTUlUIGxpY2Vuc2UuXG4gKiBGb3IgYSBjb3B5LCBzZWUgdGhlIGZpbGUgTElDRU5TRSBpbiB0aGUgcm9vdCBkaXJlY3RvcnkuXG4gKi9cblxuLyoqXG4gKiBUaW1lciBvYmplY3QgcmV0dXJuZWQgYnkgc2V0SW50ZXJ2YWxBc3luYy48YnI+XG4gKiBDYW4gYmUgdXNlZCB0b2dldGhlciB3aXRoIHtAbGluayBjbGVhckludGVydmFsQXN5bmN9IHRvIHN0b3AgZXhlY3V0aW9uLlxuICovXG5jbGFzcyBTZXRJbnRlcnZhbEFzeW5jVGltZXIge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLnN0b3BwZWQgPSBmYWxzZTtcbiAgICB0aGlzLmlkID0gMDtcbiAgICB0aGlzLnRpbWVvdXRzID0ge307XG4gICAgdGhpcy5wcm9taXNlcyA9IHt9O1xuICB9XG5cbn1cblxuLyoqXG4gKiBBdHRlbXB0cyB0byBleGVjdXRlIHRoZSBnaXZlbiBoYW5kbGVyIGF0IHJlZ3VsYXIgaW50ZXJ2YWxzLCB3aGlsZSBwcmV2ZW50aW5nPGJyPlxuICogbXVsdGlwbGUgY29uY3VycmVudCBleGVjdXRpb25zLiBUaGUgaGFuZGxlciB3aWxsIG5ldmVyIGJlIGV4ZWN1dGVkIGNvbmN1cnJlbnRseTxicj5cbiAqIG1vcmUgdGhhbiBvbmNlIGluIGFueSBnaXZlbiBtb21lbnQuIElmIHRoZSBydW5uaW5nIHRpbWUgb2YgYW55IGV4ZWN1dGlvbiBleGNlZWRzPGJyPlxuICogdGhlIGRlc2lyZWQgaW50ZXJ2YWwsIHRoZSBmb2xsb3dpbmcgZXhlY3V0aW9uIHdpbGwgYmUgc2NoZWR1bGVkIGFzIHNvb24gYXM8YnI+XG4gKiBwb3NzaWJsZTsgaWUuIGltbWVkaWF0ZWx5IGFmdGVyIHRoZSBwcmV2aW91cyBleGVjdXRpb24gY29uY2x1ZGVzLlxuICpcbiAqIEBwYXJhbSB7ZnVuY3Rpb259IGhhbmRsZXIgLSBIYW5kbGVyIGZ1bmN0aW9uIHRvIGJlIGV4ZWN1dGVkIGluIGludGVydmFscy48YnI+XG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWF5IGJlIGFzeW5jaHJvbm91cy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBpbnRlcnZhbCAtIEludGVydmFsIGluIG1pbGxpc2Vjb25kcy4gTXVzdCBiZSBhdCBsZWFzdCAxMCBtcy5cbiAqIEBwYXJhbSB7Li4uKn0gYXJncyAtIEFueSBudW1iZXIgb2YgYXJndW1lbnRzIHRvIHBhc3Mgb24gdG8gdGhlIGhhbmRsZXIuXG4gKiBAcmV0dXJucyB7U2V0SW50ZXJ2YWxBc3luY1RpbWVyfVxuICogICAgICAgICAgQSB0aW1lciBvYmplY3Qgd2hpY2ggY2FuIGJlIHVzZWQgdG8gc3RvcCBleGVjdXRpb24gd2l0aCB7QGxpbmsgY2xlYXJJbnRlcnZhbEFzeW5jfS5cbiAqXG4gKiBAYWxpYXMgW0R5bmFtaWNdIHNldEludGVydmFsQXN5bmNcbiAqL1xuXG5mdW5jdGlvbiBzZXRJbnRlcnZhbEFzeW5jKGhhbmRsZXIsIGludGVydmFsLCAuLi5hcmdzKSB7XG4gIHZhbGlkYXRlSGFuZGxlcihoYW5kbGVyKTtcbiAgdmFsaWRhdGVJbnRlcnZhbChpbnRlcnZhbCk7XG4gIGNvbnN0IHRpbWVyID0gbmV3IFNldEludGVydmFsQXN5bmNUaW1lcigpO1xuICBjb25zdCBpZCA9IHRpbWVyLmlkO1xuICB0aW1lci50aW1lb3V0c1tpZF0gPSBzZXRUaW1lb3V0KHRpbWVvdXRIYW5kbGVyLCBpbnRlcnZhbCwgdGltZXIsIGhhbmRsZXIsIGludGVydmFsLCAuLi5hcmdzKTtcbiAgcmV0dXJuIHRpbWVyO1xufVxuXG5mdW5jdGlvbiB0aW1lb3V0SGFuZGxlcih0aW1lciwgaGFuZGxlciwgaW50ZXJ2YWwsIC4uLmFyZ3MpIHtcbiAgY29uc3QgaWQgPSB0aW1lci5pZDtcbiAgdGltZXIucHJvbWlzZXNbaWRdID0gX2FzeW5jVG9HZW5lcmF0b3IoZnVuY3Rpb24qICgpIHtcbiAgICBjb25zdCBzdGFydFRpbWUgPSBuZXcgRGF0ZSgpO1xuXG4gICAgdHJ5IHtcbiAgICAgIHlpZWxkIGhhbmRsZXIoLi4uYXJncyk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgfVxuXG4gICAgY29uc3QgZW5kVGltZSA9IG5ldyBEYXRlKCk7XG5cbiAgICBpZiAoIXRpbWVyLnN0b3BwZWQpIHtcbiAgICAgIGNvbnN0IGV4ZWN1dGlvblRpbWUgPSBlbmRUaW1lIC0gc3RhcnRUaW1lO1xuICAgICAgY29uc3QgdGltZW91dCA9IGludGVydmFsID4gZXhlY3V0aW9uVGltZSA/IGludGVydmFsIC0gZXhlY3V0aW9uVGltZSA6IDA7XG4gICAgICB0aW1lci50aW1lb3V0c1tpZCArIDFdID0gc2V0VGltZW91dCh0aW1lb3V0SGFuZGxlciwgdGltZW91dCwgdGltZXIsIGhhbmRsZXIsIGludGVydmFsLCAuLi5hcmdzKTtcbiAgICB9XG5cbiAgICBkZWxldGUgdGltZXIudGltZW91dHNbaWRdO1xuICAgIGRlbGV0ZSB0aW1lci5wcm9taXNlc1tpZF07XG4gIH0pKCk7XG4gIHRpbWVyLmlkID0gaWQgKyAxO1xufVxuXG5leHBvcnRzLlNldEludGVydmFsQXN5bmNFcnJvciA9IFNldEludGVydmFsQXN5bmNFcnJvcjtcbmV4cG9ydHMuY2xlYXJJbnRlcnZhbEFzeW5jID0gY2xlYXJJbnRlcnZhbEFzeW5jO1xuZXhwb3J0cy5zZXRJbnRlcnZhbEFzeW5jID0gc2V0SW50ZXJ2YWxBc3luYztcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcFxuIiwiY29uc3QgVGlwZXIgPSByZXF1aXJlKCcuLi9saWIvaW5kZXgnKTtcclxuY29uc3Qgb3B0aW9ucyA9IHtcclxuXHR0ZXh0OiBgXHJcblx0VGhpcyBpcyBsaWtlIG9uZSBvZiB0aG9zZSBzY2VuZXMgaW4gYSBmdXR1cmlzdGljIHNjaS1maSBtb3ZpZSB3aGVyZSBzb21lb25lIGlzIGNvbW11bmljYXRpbmcgd2l0aCB0aGUgbWFpbiBjaGFyYWN0ZXIgdGhyb3VnaCBhbiBvbWlub3VzIGNvbXB1dGVyIHNjcmVlbi4gQW5kIHRoZSBwZXJzb24gaXMgY29tcGxldGVseSB1bmF3YXJlIG9mIHRoZSBjb250ZXh0IG9yIG1lYW5pbmcgb2YgdGhlIG1lc3NhZ2UsIGJ1dCB0aGVuIGxhdGVyIGZpbmRzIG91dCBpdCB3YXMgZGVzdGluZWQgdG8gYmUuIFxyXG5cdFxyXG5cdExpa2UgaG93IGF3ZXNvbWUgd291bGQgaXQgYmUgaWYgSSBqdXN0IGRpZCBzb21ldGhpbmcgbGlrZS4uLlxyXG5cclxuXHRNYXJrLiBZb3UgYXJlIHRoZSBjaG9zZW4gb25lLlxyXG5cclxuXHRNZWV0IEAgU3RhcmJ1Y2tzIGxhdGVyIHRobz9cclxuXHJcblx0TmFoIGp1c3Qga2lkZGluZywgKHNvcnJ5IGlmIHlvdXIgbmFtZSBpcyBNYXJrKS4gQW55d2F5LCBob3BlIHlvdSBlbmpveSB0aW5rZXJpbmcgYXJvdW5kIHdpdGggdGhpcyFcclxuXHJcblx0YCxcclxuXHRzaG93Q2FyZXQ6IHRydWUsXHJcblx0Y2FyZXRUeXBlOiAnbm9ybWFsJ1xyXG59O1xyXG5cclxuY29uc3Qgc3RhcnRUaXBlciA9IGFzeW5jICgpID0+IHtcclxuXHRjb25zdCB0aXBlciA9IG5ldyBUaXBlcihcclxuXHRcdGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudGlwZXItanMtY29udGFpbmVyXCIpLFxyXG5cdFx0b3B0aW9uc1xyXG5cdCk7XHJcblx0YXdhaXQgdGlwZXIuYmVnaW5UeXBpbmcoKTtcclxufVxyXG5cclxuc3RhcnRUaXBlcigpOyIsImZ1bmN0aW9uIGFzeW5jR2VuZXJhdG9yU3RlcChnZW4sIHJlc29sdmUsIHJlamVjdCwgX25leHQsIF90aHJvdywga2V5LCBhcmcpIHtcbiAgdHJ5IHtcbiAgICB2YXIgaW5mbyA9IGdlbltrZXldKGFyZyk7XG4gICAgdmFyIHZhbHVlID0gaW5mby52YWx1ZTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICByZWplY3QoZXJyb3IpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGlmIChpbmZvLmRvbmUpIHtcbiAgICByZXNvbHZlKHZhbHVlKTtcbiAgfSBlbHNlIHtcbiAgICBQcm9taXNlLnJlc29sdmUodmFsdWUpLnRoZW4oX25leHQsIF90aHJvdyk7XG4gIH1cbn1cblxuZnVuY3Rpb24gX2FzeW5jVG9HZW5lcmF0b3IoZm4pIHtcbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXMsXG4gICAgICAgIGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgIHZhciBnZW4gPSBmbi5hcHBseShzZWxmLCBhcmdzKTtcblxuICAgICAgZnVuY3Rpb24gX25leHQodmFsdWUpIHtcbiAgICAgICAgYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCBcIm5leHRcIiwgdmFsdWUpO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBfdGhyb3coZXJyKSB7XG4gICAgICAgIGFzeW5jR2VuZXJhdG9yU3RlcChnZW4sIHJlc29sdmUsIHJlamVjdCwgX25leHQsIF90aHJvdywgXCJ0aHJvd1wiLCBlcnIpO1xuICAgICAgfVxuXG4gICAgICBfbmV4dCh1bmRlZmluZWQpO1xuICAgIH0pO1xuICB9O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IF9hc3luY1RvR2VuZXJhdG9yOyIsImV4cG9ydCB2YXIgZ2V0UmFuZG9tQXJiaXRyYXJ5ID0gZnVuY3Rpb24gKG1pbiwgbWF4KSB7XHJcbiAgICByZXR1cm4gTWF0aC5yYW5kb20oKSAqIChtYXggLSBtaW4pICsgbWluO1xyXG59O1xyXG5leHBvcnQgdmFyIGNyZWF0ZVNwYW4gPSBmdW5jdGlvbiAoY2xhc3NOYW1lKSB7XHJcbiAgICB2YXIgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcclxuICAgIGVsLmNsYXNzTmFtZSA9IGNsYXNzTmFtZTtcclxuICAgIHJldHVybiBlbDtcclxufTtcclxuZXhwb3J0IHZhciBkZWxheSA9IGZ1bmN0aW9uIChtcykge1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7XHJcbiAgICAgICAgc2V0VGltZW91dChyZXNvbHZlLCBtcyk7XHJcbiAgICB9KTtcclxufTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dXRpbC5qcy5tYXAiLCJ2YXIgX19hc3NpZ24gPSAodGhpcyAmJiB0aGlzLl9fYXNzaWduKSB8fCBmdW5jdGlvbiAoKSB7XHJcbiAgICBfX2Fzc2lnbiA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24odCkge1xyXG4gICAgICAgIGZvciAodmFyIHMsIGkgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xyXG4gICAgICAgICAgICBzID0gYXJndW1lbnRzW2ldO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkpXHJcbiAgICAgICAgICAgICAgICB0W3BdID0gc1twXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHQ7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIF9fYXNzaWduLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcbn07XHJcbnZhciBfX2F3YWl0ZXIgPSAodGhpcyAmJiB0aGlzLl9fYXdhaXRlcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xyXG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XHJcbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cclxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XHJcbiAgICB9KTtcclxufTtcclxudmFyIF9fZ2VuZXJhdG9yID0gKHRoaXMgJiYgdGhpcy5fX2dlbmVyYXRvcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIGJvZHkpIHtcclxuICAgIHZhciBfID0geyBsYWJlbDogMCwgc2VudDogZnVuY3Rpb24oKSB7IGlmICh0WzBdICYgMSkgdGhyb3cgdFsxXTsgcmV0dXJuIHRbMV07IH0sIHRyeXM6IFtdLCBvcHM6IFtdIH0sIGYsIHksIHQsIGc7XHJcbiAgICByZXR1cm4gZyA9IHsgbmV4dDogdmVyYigwKSwgXCJ0aHJvd1wiOiB2ZXJiKDEpLCBcInJldHVyblwiOiB2ZXJiKDIpIH0sIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiAoZ1tTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KSwgZztcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyByZXR1cm4gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIHN0ZXAoW24sIHZdKTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gc3RlcChvcCkge1xyXG4gICAgICAgIGlmIChmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiR2VuZXJhdG9yIGlzIGFscmVhZHkgZXhlY3V0aW5nLlwiKTtcclxuICAgICAgICB3aGlsZSAoXykgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKGYgPSAxLCB5ICYmICh0ID0gb3BbMF0gJiAyID8geVtcInJldHVyblwiXSA6IG9wWzBdID8geVtcInRocm93XCJdIHx8ICgodCA9IHlbXCJyZXR1cm5cIl0pICYmIHQuY2FsbCh5KSwgMCkgOiB5Lm5leHQpICYmICEodCA9IHQuY2FsbCh5LCBvcFsxXSkpLmRvbmUpIHJldHVybiB0O1xyXG4gICAgICAgICAgICBpZiAoeSA9IDAsIHQpIG9wID0gW29wWzBdICYgMiwgdC52YWx1ZV07XHJcbiAgICAgICAgICAgIHN3aXRjaCAob3BbMF0pIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMDogY2FzZSAxOiB0ID0gb3A7IGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA0OiBfLmxhYmVsKys7IHJldHVybiB7IHZhbHVlOiBvcFsxXSwgZG9uZTogZmFsc2UgfTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNTogXy5sYWJlbCsrOyB5ID0gb3BbMV07IG9wID0gWzBdOyBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNzogb3AgPSBfLm9wcy5wb3AoKTsgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEodCA9IF8udHJ5cywgdCA9IHQubGVuZ3RoID4gMCAmJiB0W3QubGVuZ3RoIC0gMV0pICYmIChvcFswXSA9PT0gNiB8fCBvcFswXSA9PT0gMikpIHsgXyA9IDA7IGNvbnRpbnVlOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSAzICYmICghdCB8fCAob3BbMV0gPiB0WzBdICYmIG9wWzFdIDwgdFszXSkpKSB7IF8ubGFiZWwgPSBvcFsxXTsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDYgJiYgXy5sYWJlbCA8IHRbMV0pIHsgXy5sYWJlbCA9IHRbMV07IHQgPSBvcDsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodCAmJiBfLmxhYmVsIDwgdFsyXSkgeyBfLmxhYmVsID0gdFsyXTsgXy5vcHMucHVzaChvcCk7IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRbMl0pIF8ub3BzLnBvcCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIF8udHJ5cy5wb3AoKTsgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgb3AgPSBib2R5LmNhbGwodGhpc0FyZywgXyk7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkgeyBvcCA9IFs2LCBlXTsgeSA9IDA7IH0gZmluYWxseSB7IGYgPSB0ID0gMDsgfVxyXG4gICAgICAgIGlmIChvcFswXSAmIDUpIHRocm93IG9wWzFdOyByZXR1cm4geyB2YWx1ZTogb3BbMF0gPyBvcFsxXSA6IHZvaWQgMCwgZG9uZTogdHJ1ZSB9O1xyXG4gICAgfVxyXG59O1xyXG5pbXBvcnQgeyBzZXRJbnRlcnZhbEFzeW5jLCBjbGVhckludGVydmFsQXN5bmMgfSBmcm9tIFwic2V0LWludGVydmFsLWFzeW5jL2R5bmFtaWNcIjtcclxuaW1wb3J0IHsgZ2V0UmFuZG9tQXJiaXRyYXJ5LCBjcmVhdGVTcGFuLCBkZWxheSB9IGZyb20gJy4vdXRpbCc7XHJcbnZhciBUaXBlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFRpcGVyKGNvbnRhaW5lciwgb3B0aW9ucykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5vcHRpb25zID0ge1xyXG4gICAgICAgICAgICB0ZXh0OiBcIkxvcmVtIGlwc3VtIGRvbG9yIHNpdCBhbWV0LCBjb25zZWN0ZXR1ciBhZGlwaXNjaW5nIGVsaXQuIFBoYXNlbGx1cyB0ZW1wdXMgc2FnaXR0aXMgZGFwaWJ1cy4gRnVzY2UgbGFjaW5pYSBkdWkgdG9ydG9yLCBhdCBwb3J0dGl0b3IgcXVhbSBsdWN0dXMgdXQuIEFsaXF1YW0gZ3JhdmlkYSBjb21tb2RvIGVyb3MgYWMgZGljdHVtLiBOYW0gYWMgb2RpbyBhdCBzZW0gaW50ZXJkdW0gZGljdHVtIGVnZXQgc2l0IGFtZXQgbG9yZW0uIFZpdmFtdXMgZW5pbSB2ZWxpdCwgY29uZGltZW50dW0gc2VkIG5lcXVlIG5vbiwgZGlnbmlzc2ltIHZpdmVycmEgbnVsbGEuIENsYXNzIGFwdGVudCB0YWNpdGkgc29jaW9zcXUgYWQgbGl0b3JhIHRvcnF1ZW50IHBlciBjb251YmlhIG5vc3RyYSwgcGVyIGluY2VwdG9zIGhpbWVuYWVvcy4gRHVpcyBzb2RhbGVzLCBuZXF1ZSBlZ2V0IHRpbmNpZHVudCBlZmZpY2l0dXIsIG5pc2kgb3JjaSB2ZXN0aWJ1bHVtIGRpYW0sIGVnZXQgZnJpbmdpbGxhIGR1aSBkb2xvciBzZWQgbmlzaS4gUGVsbGVudGVzcXVlIGZldWdpYXQgYXVndWUgaW4gZmVsaXMgaW50ZXJkdW0sIG5vbiB0ZW1wdXMgZHVpIHZvbHV0cGF0LiBTZWQgcHVsdmluYXIsIG1hc3NhIG5vbiBwbGFjZXJhdCBzY2VsZXJpc3F1ZSwgbnVuYyB0ZWxsdXMgcG9zdWVyZSBmZWxpcywgYSB1bHRyaWNpZXMgbWkgbGliZXJvIGlkIHZlbGl0LiBNYXVyaXMgc2VkIGFyY3UgZG9sb3IuIE1hdXJpcyB2YXJpdXMgYSBtZXR1cyBzaXQgYW1ldCBwdWx2aW5hci4gUHJvaW4gcmhvbmN1cyBub24gcXVhbSBpbiB2dWxwdXRhdGUuIFwiLFxyXG4gICAgICAgICAgICBoZXNpdGF0aW9uOiAwLjQ1LFxyXG4gICAgICAgICAgICB3b3Jkc1Blck1pbnV0ZTogNDAsXHJcbiAgICAgICAgICAgIHBhdXNlVGltZW91dDogNTI1LFxyXG4gICAgICAgICAgICBwYXVzZU9uU3BhY2U6IGZhbHNlLFxyXG4gICAgICAgICAgICBwYXVzZU9uRW5kT2ZTZW50ZW5jZTogdHJ1ZSxcclxuICAgICAgICAgICAgc2hvd0NhcmV0OiBmYWxzZSxcclxuICAgICAgICAgICAgY2FyZXRUeXBlOiBcIm5vcm1hbFwiLFxyXG4gICAgICAgICAgICBnbGl0Y2g6IGZhbHNlLFxyXG4gICAgICAgICAgICBvbkZpbmlzaGVkVHlwaW5nOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkZpbmlzaGVkIHR5cGluZyFcIik7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLmN1cnJlbnRJbmRleCA9IDA7XHJcbiAgICAgICAgdGhpcy50eXBpbmdMaXN0ZW5lciA9IHtcclxuICAgICAgICAgICAgZmluaXNoZWRUeXBpbmc6IGZhbHNlLFxyXG4gICAgICAgICAgICBmaW5pc2hlZFR5cGluZ0xpc3RlbmVyOiBmdW5jdGlvbiAoXykgeyB9LFxyXG4gICAgICAgICAgICBnZXQgaXNGaW5pc2hlZFR5cGluZygpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmZpbmlzaGVkVHlwaW5nO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBzZXQgaXNGaW5pc2hlZFR5cGluZyhmaW5pc2hlZFR5cGluZykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5maW5pc2hlZFR5cGluZyA9IGZpbmlzaGVkVHlwaW5nO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5maW5pc2hlZFR5cGluZ0xpc3RlbmVyKGZpbmlzaGVkVHlwaW5nKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgcmVnaXN0ZXJMaXN0ZW5lcjogZnVuY3Rpb24gKGxpc3RlbmVyKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmZpbmlzaGVkVHlwaW5nTGlzdGVuZXIgPSBsaXN0ZW5lcjtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMudHJpbSA9IGZ1bmN0aW9uIChzdHIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHN0ci50cmltKCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLmdldFR5cGluZ1NwZWVkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMuY3VycmVudFRleHQubGVuZ3RoIC8gKF90aGlzLm9wdGlvbnMud29yZHNQZXJNaW51dGUgKiA0LjcpICsgMTA7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLmdldENhcmV0Q2hhcmFjdGVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMub3B0aW9ucy5jYXJldFR5cGUgPT09IFwibm9ybWFsXCIgPyBcIuKWrlwiIDogXCJfXCI7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLnNldEN1cnJlbnRUZXh0ID0gZnVuY3Rpb24gKHRleHQpIHtcclxuICAgICAgICAgICAgX3RoaXMuY3VycmVudFRleHQgPSB0ZXh0O1xyXG4gICAgICAgICAgICBfdGhpcy5jdXJyZW50SW5kZXggPSAwO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIlNldHRpbmcgY3VycmVudCB0ZXh0IHRvOlwiLCB0ZXh0KTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuc2V0Q3VycmVudFRleHRFbGVtZW50ID0gZnVuY3Rpb24gKGN1cnJlbnRUZXh0RWxlbWVudCkge1xyXG4gICAgICAgICAgICBfdGhpcy5jdXJyZW50VGV4dEVsZW1lbnQgPSBjdXJyZW50VGV4dEVsZW1lbnQ7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLmdldEN1cnJlbnRUZXh0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMuY3VycmVudFRleHQ7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLmdldFRleHRCeVJhbmdlID0gZnVuY3Rpb24gKHN0YXJ0LCBlbmQpIHtcclxuICAgICAgICAgICAgdmFyIHRleHQgPSBfdGhpcy5nZXRDdXJyZW50VGV4dCgpO1xyXG4gICAgICAgICAgICB2YXIgc3RyID0gdGV4dC5zdWJzdHJpbmcoc3RhcnQsIGVuZCk7XHJcbiAgICAgICAgICAgIHJldHVybiBzdHI7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLmdldENhcmV0TGVuZ3RoID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMub3B0aW9ucy5zaG93Q2FyZXQgPyAxIDogMDtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuc291cmNlVGV4dElzVGFyZ2V0TGVuZ3RoID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgY2FyZXRMZW5ndGggPSBfdGhpcy5nZXRDYXJldExlbmd0aCgpO1xyXG4gICAgICAgICAgICB2YXIgdGV4dENvbnRlbnRMZW5ndGggPSBfdGhpcy5jdXJyZW50VGV4dEVsZW1lbnQudGV4dENvbnRlbnQubGVuZ3RoIC0gY2FyZXRMZW5ndGg7XHJcbiAgICAgICAgICAgIHZhciBjdXJyZW50VGV4dExlbmd0aCA9IF90aGlzLmN1cnJlbnRUZXh0Lmxlbmd0aCAtIDE7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQ3VycmVudCB0ZXh0IGxlbmd0aCB2cyBhY3R1YWwgY29udGFpbmVyIHRleHQgbGVuZ3RoOlwiLCBjdXJyZW50VGV4dExlbmd0aCwgdGV4dENvbnRlbnRMZW5ndGgpO1xyXG4gICAgICAgICAgICByZXR1cm4gdGV4dENvbnRlbnRMZW5ndGggPT0gY3VycmVudFRleHRMZW5ndGg7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLm9ic2VydmVUeXBpbmcgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy50eXBpbmdMaXN0ZW5lci5yZWdpc3Rlckxpc3RlbmVyKGZ1bmN0aW9uIChpc0ZpbmlzaGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzRmluaXNoZWQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuc2V0RmluaXNoZWRUeXBpbmcgPSBmdW5jdGlvbiAoZmluaXNoZWRUeXBpbmcpIHtcclxuICAgICAgICAgICAgX3RoaXMudHlwaW5nTGlzdGVuZXIuaXNGaW5pc2hlZFR5cGluZyA9IGZpbmlzaGVkVHlwaW5nO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5yZXNldEZpbmlzaGVkVHlwaW5nID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBfdGhpcy5zZXRGaW5pc2hlZFR5cGluZyhmYWxzZSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLnVwZGF0ZUVsZW1lbnRUZXh0ID0gZnVuY3Rpb24gKGNoYXIpIHtcclxuICAgICAgICAgICAgdmFyIHByZXZpb3VzVGV4dENvbnRlbnQgPSBfdGhpcy5jdXJyZW50VGV4dEVsZW1lbnQudGV4dENvbnRlbnQ7XHJcbiAgICAgICAgICAgIHZhciBsYXN0SW5kZXggPSBwcmV2aW91c1RleHRDb250ZW50Lmxlbmd0aDtcclxuICAgICAgICAgICAgdmFyIHRleHQgPSBfdGhpcy5nZXRUZXh0QnlSYW5nZSgwLCBsYXN0SW5kZXgpICsgY2hhcjtcclxuICAgICAgICAgICAgX3RoaXMuY3VycmVudFRleHRFbGVtZW50LnRleHRDb250ZW50ID0gdGV4dDtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuc3RvcFR5cGluZyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgX3RoaXMuYWN0aXZhdGVDYXJldCgpO1xyXG4gICAgICAgICAgICByZXR1cm4gY2xlYXJJbnRlcnZhbEFzeW5jKF90aGlzLnR5cGluZ0ludGVydmFsKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMucGF1c2VUeXBpbmcgPSBmdW5jdGlvbiAobXMpIHsgcmV0dXJuIF9fYXdhaXRlcihfdGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHRpbWVPdXQ7XHJcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVPdXQgPSBtcyAhPT0gbnVsbCAmJiBtcyAhPT0gdm9pZCAwID8gbXMgOiB0aGlzLm9wdGlvbnMucGF1c2VUaW1lb3V0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0b3BUeXBpbmcoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgZGVsYXkodGltZU91dCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlc3VtZVR5cGluZygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pOyB9O1xyXG4gICAgICAgIHRoaXMucmVzdW1lVHlwaW5nID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBfdGhpcy5pbml0aWFsaXplVHlwaW5nSW50ZXJ2YWwoKTtcclxuICAgICAgICAgICAgX3RoaXMuZGVhY3RpdmF0ZUNhcmV0KCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLmFwcGx5VmFyaWF0aW9uID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gX19hd2FpdGVyKF90aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgdGltZW91dDtcclxuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGltZW91dCA9IE1hdGguZmxvb3IodGhpcy5vcHRpb25zLmhlc2l0YXRpb24gKlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgTWF0aC5yYW5kb20oKSAqXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXRSYW5kb21BcmJpdHJhcnkoMTAwLCA1MDApKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgZGVsYXkodGltZW91dCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pOyB9O1xyXG4gICAgICAgIHRoaXMuZ2V0Q2hhckF0ID0gZnVuY3Rpb24gKGluZGV4KSB7XHJcbiAgICAgICAgICAgIHZhciB0ZXh0ID0gX3RoaXMuY3VycmVudFRleHQ7XHJcbiAgICAgICAgICAgIHZhciBjaGFyID0gdGV4dC5jaGFyQXQoaW5kZXgpO1xyXG4gICAgICAgICAgICByZXR1cm4gY2hhcjtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuaXNFbmRPZlNlbnRlbmNlID0gZnVuY3Rpb24gKGN1cnJlbnRDaGFyLCBuZXh0Q2hhcikge1xyXG4gICAgICAgICAgICB2YXIgaXNFbmRPZlNlbnRlbmNlID0gKC9bXFwuXFw/XFwhXS8udGVzdChjdXJyZW50Q2hhcikgJiYgIS9bXFwuXFw/XFwhXS8udGVzdChuZXh0Q2hhcikpIHx8XHJcbiAgICAgICAgICAgICAgICAvXFxcXG4vLnRlc3QoY3VycmVudENoYXIpO1xyXG4gICAgICAgICAgICByZXR1cm4gaXNFbmRPZlNlbnRlbmNlO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5nZXRTaG91bGRQYXVzZSA9IGZ1bmN0aW9uIChjdXJyZW50Q2hhciwgbmV4dENoYXIpIHtcclxuICAgICAgICAgICAgdmFyIGlzU3BhY2UgPSAvXFxzLy50ZXN0KGN1cnJlbnRDaGFyKTtcclxuICAgICAgICAgICAgdmFyIGlzRW5kT2ZTZW50ZW5jZSA9IF90aGlzLmlzRW5kT2ZTZW50ZW5jZShjdXJyZW50Q2hhciwgbmV4dENoYXIpO1xyXG4gICAgICAgICAgICB2YXIgc2hvdWxkUGF1c2UgPSAoX3RoaXMub3B0aW9ucy5wYXVzZU9uU3BhY2UgJiYgaXNTcGFjZSkgfHxcclxuICAgICAgICAgICAgICAgIChfdGhpcy5vcHRpb25zLnBhdXNlT25FbmRPZlNlbnRlbmNlICYmIGlzRW5kT2ZTZW50ZW5jZSk7XHJcbiAgICAgICAgICAgIHJldHVybiBzaG91bGRQYXVzZTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuaW5zZXJ0Q3VycmVudENoYXIgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBfX2F3YWl0ZXIoX3RoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBjdXJyZW50Q2hhciwgbmV4dENoYXIsIHNob3VsZFBhdXNlLCBpc0ZpbmlzaGVkO1xyXG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50Q2hhciA9IHRoaXMuZ2V0Q2hhckF0KHRoaXMuY3VycmVudEluZGV4KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV4dENoYXIgPSB0aGlzLmdldENoYXJBdCh0aGlzLmN1cnJlbnRJbmRleCArIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzaG91bGRQYXVzZSA9IHRoaXMuZ2V0U2hvdWxkUGF1c2UoY3VycmVudENoYXIsIG5leHRDaGFyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXNGaW5pc2hlZCA9IHRoaXMuc291cmNlVGV4dElzVGFyZ2V0TGVuZ3RoKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlRWxlbWVudFRleHQoY3VycmVudENoYXIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMub3B0aW9ucy5oZXNpdGF0aW9uKSByZXR1cm4gWzMgLypicmVhayovLCAyXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5hcHBseVZhcmlhdGlvbigpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSAyO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpc0ZpbmlzaGVkKSByZXR1cm4gWzMgLypicmVhayovLCA0XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5vbkZpbmlzaGVkVHlwaW5nKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vcHRpb25zLm9uRmluaXNoZWRUeXBpbmcoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRGaW5pc2hlZFR5cGluZyh0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5zdG9wVHlwaW5nKCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCA2XTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudEluZGV4ICs9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghc2hvdWxkUGF1c2UpIHJldHVybiBbMyAvKmJyZWFrKi8sIDZdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLnBhdXNlVHlwaW5nKCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDY7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA2OiByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pOyB9O1xyXG4gICAgICAgIHRoaXMuYWN0aXZhdGVDYXJldCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKF90aGlzLmNhcmV0RWxlbWVudClcclxuICAgICAgICAgICAgICAgIF90aGlzLmNhcmV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiYmxpbmtpbmdcIik7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLmRlYWN0aXZhdGVDYXJldCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKF90aGlzLmNhcmV0RWxlbWVudClcclxuICAgICAgICAgICAgICAgIF90aGlzLmNhcmV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwiYmxpbmtpbmdcIik7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLmFwcGVuZEVsZW1lbnRUb0NvbnRhaW5lciA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XHJcbiAgICAgICAgICAgIF90aGlzLmNvbnRhaW5lci5hcHBlbmRDaGlsZChlbGVtZW50KTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZVRleHRFbGVtZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgdGV4dEVsZW1lbnQgPSBjcmVhdGVTcGFuKFwidGlwZXItanMtdGV4dFwiKTtcclxuICAgICAgICAgICAgX3RoaXMuYXBwZW5kRWxlbWVudFRvQ29udGFpbmVyKHRleHRFbGVtZW50KTtcclxuICAgICAgICAgICAgX3RoaXMuc2V0Q3VycmVudFRleHRFbGVtZW50KHRleHRFbGVtZW50KTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZUNhcmV0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoX3RoaXMuY2FyZXRFbGVtZW50KVxyXG4gICAgICAgICAgICAgICAgX3RoaXMuY2FyZXRFbGVtZW50LnJlbW92ZSgpO1xyXG4gICAgICAgICAgICB2YXIgY2FyZXQgPSBjcmVhdGVTcGFuKFwidGlwZXItanMtY2FyZXRcIik7XHJcbiAgICAgICAgICAgIGNhcmV0LmlubmVyVGV4dCA9IF90aGlzLmdldENhcmV0Q2hhcmFjdGVyKCk7XHJcbiAgICAgICAgICAgIF90aGlzLmFwcGVuZEVsZW1lbnRUb0NvbnRhaW5lcihjYXJldCk7XHJcbiAgICAgICAgICAgIF90aGlzLmNhcmV0RWxlbWVudCA9IGNhcmV0O1xyXG4gICAgICAgICAgICBfdGhpcy5hY3RpdmF0ZUNhcmV0KCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLmluaXRpYWxpemVHbGl0Y2hFZmZlY3QgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIF90aGlzLmdsaXRjaEludGVydmFsID0gc2V0SW50ZXJ2YWxBc3luYyhfdGhpcy5hcHBseUdsaXRjaCwgNTAwMCk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQmVnaW5uaW5nIHRvIHR5cGUgYXQgXCIgKyBfdGhpcy5vcHRpb25zLndvcmRzUGVyTWludXRlICsgXCIgd29yZHMgcGVyIG1pbnV0ZS5cIik7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLmluaXRpYWxpemVUeXBpbmdJbnRlcnZhbCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIG1zID0gX3RoaXMuZ2V0VHlwaW5nU3BlZWQoKTtcclxuICAgICAgICAgICAgX3RoaXMudHlwaW5nSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbEFzeW5jKF90aGlzLmluc2VydEN1cnJlbnRDaGFyLCBtcyk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiVHlwaW5nIGludGVydmFsIGlzOlwiLCBtcyk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLnNldEVsZW1lbnRUZXh0ID0gZnVuY3Rpb24gKHRleHQpIHtcclxuICAgICAgICAgICAgX3RoaXMuY3VycmVudFRleHRFbGVtZW50LnRleHRDb250ZW50ID0gdGV4dDtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMucmVzZXRFbGVtZW50VGV4dCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgX3RoaXMuY29udGFpbmVyLmlubmVySFRNTCA9IFwiXCI7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLmFwcGx5R2xpdGNoID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gX19hd2FpdGVyKF90aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgdGV4dCwgcmFuZG9tQ2hhclBvc2l0aW9uLCBiZWZvcmVDaGFyLCBhZnRlckNoYXIsIGdsaXRjaDtcclxuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dCA9IHRoaXMuY29udGFpbmVyLnRleHRDb250ZW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByYW5kb21DaGFyUG9zaXRpb24gPSBnZXRSYW5kb21BcmJpdHJhcnkoMSwgdGV4dC5sZW5ndGgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBiZWZvcmVDaGFyID0gdGV4dC5zdWJzdHJpbmcoMCwgcmFuZG9tQ2hhclBvc2l0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWZ0ZXJDaGFyID0gdGV4dC5zdWJzdHJpbmcocmFuZG9tQ2hhclBvc2l0aW9uLCB0ZXh0Lmxlbmd0aCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGdsaXRjaCA9IGJlZm9yZUNoYXIgKyBcIlxcdTI1QUUgXCIgKyBhZnRlckNoYXI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0RWxlbWVudFRleHQoZ2xpdGNoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgZGVsYXkodGhpcy5vcHRpb25zLmhlc2l0YXRpb24gKiBnZXRSYW5kb21BcmJpdHJhcnkoMTAwLCAyMDApKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0RWxlbWVudFRleHQoXCJcIiArIGJlZm9yZUNoYXIgKyBhZnRlckNoYXIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pOyB9O1xyXG4gICAgICAgIHRoaXMuYmVnaW5UeXBpbmcgPSBmdW5jdGlvbiAodGV4dCwgcmVzZXQpIHsgcmV0dXJuIF9fYXdhaXRlcihfdGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGN1cnJlbnRUZXh0O1xyXG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50VGV4dCA9IHRleHQgfHwgdGhpcy5vcHRpb25zLnRleHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXNldClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVzZXRFbGVtZW50VGV4dCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmluaXRpYWxpemVUZXh0RWxlbWVudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldEN1cnJlbnRUZXh0KGN1cnJlbnRUZXh0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXNldEZpbmlzaGVkVHlwaW5nKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5pdGlhbGl6ZVR5cGluZ0ludGVydmFsKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMuZ2xpdGNoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbml0aWFsaXplR2xpdGNoRWZmZWN0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMuc2hvd0NhcmV0KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbml0aWFsaXplQ2FyZXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWFjdGl2YXRlQ2FyZXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5vYnNlcnZlVHlwaW5nKCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pOyB9O1xyXG4gICAgICAgIHRoaXMubGluZSA9IGZ1bmN0aW9uICh0ZXh0KSB7IHJldHVybiBfX2F3YWl0ZXIoX3RoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6IHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuYmVnaW5UeXBpbmcodGV4dCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdGhpc107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pOyB9O1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyO1xyXG4gICAgICAgIGlmICh0aGlzLmNvbnRhaW5lciA9PT0gbnVsbClcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwidGlwZXItanM6IEludmFsaWQgY29udGFpbmVyIGVsZW1lbnQuXCIpO1xyXG4gICAgICAgIGlmIChvcHRpb25zKVxyXG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMgPSBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgdGhpcy5vcHRpb25zKSwgb3B0aW9ucyk7XHJcbiAgICAgICAgdGhpcy5vcHRpb25zLnRleHQgPSB0aGlzLnRyaW0odGhpcy5vcHRpb25zLnRleHQpO1xyXG4gICAgICAgIHRoaXMuc2V0Q3VycmVudFRleHQodGhpcy5vcHRpb25zLnRleHQpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIFRpcGVyO1xyXG59KCkpO1xyXG5leHBvcnQgZGVmYXVsdCBUaXBlcjtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIl0sInNvdXJjZVJvb3QiOiIifQ==